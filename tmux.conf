# set shell
set -g default-shell /usr/local/bin/zsh

# upgrade $TERM
set -g default-terminal "xterm-256color"

# Copy-paste integration
set-option -g default-command "reattach-to-user-namespace -l /usr/local/bin/zsh"

#address vim mode switching delay (http://superuser.com/a/252717/65504)
set -sg escape-time 0

set -g base-index 1
# don't rename windows automatically
set-option -g allow-rename off

# remap prefix from 'C-b' to 'c-space'
# remap prefix from 'C-b' to 'c-\'
unbind 'c-\'
set-option -g prefix 'c-\'
bind-key 'c-\' send-prefix

# reload config file
bind r source-file ~/.tmux.conf

# emacs key bindings in tmux command prompt (prefix + :) are better than
# vi keys, even for vim users
set -g status-keys emacs

# split panes using | and -
unbind '"'
unbind %
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# Remap pane navigation
unbind-key h
unbind-key j
unbind-key k
unbind-key l
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# Resizing pane
bind -r C-h resize-pane -L
bind -r C-j resize-pane -D
bind -r C-k resize-pane -U
bind -r C-l resize-pane -R


# Use vim keybindings in copy mode
setw -g mode-keys vi

# Setup 'v' to begin selection as in Vim
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"

#################
#   theme
#################
set -g status-interval 1
set -g status-fg colour240
set -g status-bg colour233

set -g status-left-bg colour233
set -g status-left-fg colour243
set -g status-left-length 40
set -g status-left "#[fg=colour233,bg=colour39,bold] #S #[fg=colour39,bg=colour240,nobold]#[fg=colour233,bg=colour240] #(whoami) #[fg=colour240,bg=colour235]#[fg=colour240,bg=colour235] #I:#P #[fg=colour235,bg=colour233,nobold]"

set -g status-right-bg colour233
set -g status-right-fg colour243
set -g status-right-length 150
set -g status-right "#{prefix_highlight}#[fg=colour235,bg=colour233]#[fg=colour240,bg=colour235] %H:%M:%S #[fg=colour240,bg=colour235]#[fg=colour233,bg=colour240] %d-%b-%y #[fg=colour39,bg=colour240]#[fg=colour233,bg=colour39,bold] #H "

set -g window-status-format "  #I:#W#F  "
set -g window-status-current-format "#[fg=colour233,bg=black]#[fg=colour81,nobold] #I:#W#F #[fg=colour233,bg=black,nobold]"
set -g window-status-current-bg colour39
set -g window-status-current-fg colour235
set -g window-status-activity-bg colour75 # fg and bg are flipped here due to
set -g window-status-activity-fg colour233 # a bug in tmux

set -g window-status-separator ""
set -g status-justify centre

set -g pane-border-bg default
set -g pane-border-fg colour238
set -g pane-active-border-bg default
set -g pane-active-border-fg colour39

set -g display-panes-colour colour233
set -g display-panes-active-colour colour245

set -g clock-mode-colour colour39
set -g clock-mode-style 24

set -g message-bg colour39
set -g message-fg black
set -g message-command-bg colour233
set -g message-command-fg black

set -g mode-bg colour39
set -g mode-fg colour232

################
# Plugins
################


# tmux-resurrect
#
# set -g @resurrect-strategy-vim 'session'
# set -g @resurrect-capture-pane-contents 'on'
set -g @resurrect-processes 'false'

# tmux-continuum
#
# set -g @continuum-boot 'on'
# set -g @continuum-boot-options 'iterm'
set -g @continuum-restore 'on'

# Tmux prefix highlight
#
# set -g status-right '#{prefix_highlight} | %a %Y-%m-%d %H:%M'

# Tmux Plugin Manager
#
set -g @plugin 'tmux-plugins/tpm'
#set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

set -g @plugin 'tmux-plugins/tmux-prefix-highlight'


## Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
